<!doctype html>
<html>
    <head>
    </head>
    <body>
        <div id="contenedor"></div>
        <script>
            function grafica(contenedor,datos){
                let colores =  [ `AliceBlue`, `AntiqueWhite`, `Aqua`, `Aquamarine`, `Azure`, `Beige`, `Bisque`, `Black`, `BlanchedAlmond`, `Blue`, `BlueViolet`, `Brown`, `BurlyWood`, `CadetBlue`, `Chartreuse`, `Chocolate`, `Coral`, `CornflowerBlue`, `Cornsilk`, `Crimson`, `Cyan`, `DarkBlue`, `DarkCyan`, `DarkGoldenRod`, `DarkGray`, `DarkGrey`, `DarkGreen`, `DarkKhaki`, `DarkMagenta`, `DarkOliveGreen`, `Darkorange`, `DarkOrchid`, `DarkRed`, `DarkSalmon`, `DarkSeaGreen`, `DarkSlateBlue`, `DarkSlateGray`, `DarkSlateGrey`, `DarkTurquoise`, `DarkViolet`, `DeepPink`, `DeepSkyBlue`, `DimGray`, `DimGrey`, `DodgerBlue`, `FireBrick`, `FloralWhite`, `ForestGreen`, `Fuchsia`, `Gainsboro`, `GhostWhite`, `Gold`, `GoldenRod`, `Gray`, `Grey`, `Green`, `GreenYellow`, `HoneyDew`, `HotPink`, `IndianRed`, `Indigo`, `Ivory`, `Khaki`, `Lavender`, `LavenderBlush`, `LawnGreen`, `LemonChiffon`, `LightBlue`, `LightCoral`, `LightCyan`, `LightGoldenRodYellow`, `LightGray`, `LightGrey`, `LightGreen`, `LightPink`, `LightSalmon`, `LightSeaGreen`, `LightSkyBlue`, `LightSlateGray`, `LightSlateGrey`, `LightSteelBlue`, `LightYellow`, `Lime`, `LimeGreen`, `Linen`, `Magenta`, `Maroon`, `MediumAquaMarine`, `MediumBlue`, `MediumOrchid`, `MediumPurple`, `MediumSeaGreen`, `MediumSlateBlue`, `MediumSpringGreen`, `MediumTurquoise`, `MediumVioletRed`, `MidnightBlue`, `MintCream`, `MistyRose`, `Moccasin`, `NavajoWhite`, `Navy`, `OldLace`, `Olive`, `OliveDrab`, `Orange`, `OrangeRed`, `Orchid`, `PaleGoldenRod`, `PaleGreen`, `PaleTurquoise`, `PaleVioletRed`, `PapayaWhip`, `PeachPuff`, `Peru`, `Pink`, `Plum`, `PowderBlue`, `Purple`, `Red`, `RosyBrown`, `RoyalBlue`, `SaddleBrown`, `Salmon`, `SandyBrown`, `SeaGreen`, `SeaShell`, `Sienna`, `Silver`, `SkyBlue`, `SlateBlue`, `SlateGray`, `SlateGrey`, `Snow`, `SpringGreen`, `SteelBlue`, `Tan`, `Teal`, `Thistle`, `Tomato`, `Turquoise`, `Violet`, `Wheat`, `White`, `WhiteSmoke`, `Yellow`, `YellowGreen`]
                
                let suma = 0;
                Object.keys(datos).forEach(clave => {
                  suma += datos[clave]
                });
                console.log(suma);

                let anchura = 512;                                  // Defino una anchura
                let altura = anchura;                               // La altura es igual a la anchura
                let radio = anchura/2-30;                           // Defino el radio un poco menor para tener margen

                const lienzo = document.createElement("canvas");    // Llamo al lienzo
                const contexto = lienzo.getContext("2d");           // Dibujo en 2D

                lienzo.width = anchura;                             // Le pongo la anchura al lienzo
                lienzo.height = altura;                             // Le pongo la altura al lienzo

                lienzo.style.border = "1px solid grey";             // Le pongo un borde al lienzo para verlo

                let cursor = 0
                let contador = 1;
                Object.keys(datos).forEach(clave => {               // Para cada uno de los elementos del json

                    contexto.fillStyle = colores[contador]                          // Voy a pintar de color rojo

                    let inicio = cursor                             // El inicio es el angulo en el que empiezo
                    let final = cursor + (datos[clave]/suma)*Math.PI*2  // El final es el angulo en el que acabo
                    cursor += (datos[clave]/suma)*Math.PI*2             // Actualizo el cursor para que el principio del siguiente angulo sea el final del angulo anterior

                    contexto.beginPath();                               // Inicio el trazo
                    contexto.moveTo(anchura/2,altura/2);                // Muevo el cursor al centro
                    contexto.arc(anchura/2,altura/2,radio,inicio,final); // Trazo el arco

                    contexto.fill();                                    // Y relleno
                    contador++;

                });
                document.getElementById(contenedor).appendChild(lienzo)
            }
            
            let datos = {
                    "uno":45,
                    "dos":34,
                    "tres":67,
                    "cuatro":45,
                    "cinco":65
                }
            
            grafica("contenedor",datos);
            
            datos = {
                    "uno":23,
                    "dos":87,
                    "tres":56,
                    "cuatro":98,
                    "cinco":23
                }
            
            grafica("contenedor",datos);
                                
        </script>
    </body>
</html>